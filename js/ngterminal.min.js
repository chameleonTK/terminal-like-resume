angular.module("ngterminal",[]),angular.module("ngterminal").factory("Command",["$q","Files","$window",function(e,t,n){function r(e,n){if(n.length>0){if(n[0].length>0&&"-"==n[0][0])var r=n[0].split("").find(function(e){return"a"==e}),a=n[0].split("").find(function(e){return"l"==e});var i=n.find(function(e){return e.length>0&&"-"!=e[0]});if(i){if(console.log(i,n[n.length-1]),i!=n[n.length-1])return{successful:!1,messages:["ls: Not support multiple files"]};return t.getFiles().find(function(e){return"folder"==e.type&&e.name==i})?{successful:!0,messages:[]}:{successful:!1,messages:["ls: "+i+": No such file or directory"]}}}if(a){var o=t.getFiles().reduce(function(e,t){for(var n=t.size;n.length<6;)n=" "+n;return"folder"==t.type?e.push("drw-r--r--   1 imtk  imtk       "+n+" Mar 10 00:00 "+t.name):e.push("-rw-r--r--   1 imtk  imtk       "+n+" Mar 10 00:00 "+t.name),e},[]);return{successful:!0,messages:o}}if(r){var o=t.getFiles().reduce(function(e,t){return e.push(t.name),e},[]);return{successful:!0,messages:o}}var s=Math.ceil(t.getFiles().length/2),o=t.getFiles().reduce(function(e,t,n){if(n<s)e.push(t.name);else{for(;e[n-s].length<18;)e[n-s]+=" ";e[n-s]+=t.name}return e},[]);return{successful:!0,messages:o}}function a(e,n){if(1==n.length){var r=t.read(n[0]);return!1===r?{successful:!1,messages:["cat: "+n[0]+": No such file or directory"]}:{successful:!0,messages:r}}return n.length>1?{successful:!1,messages:["cat: Not support multiple files"]}:{successful:!1,messages:["cat: Invalid arguments"]}}function i(e,n){return{successful:!0,messages:t.read("man")}}function o(e,r){if(1==r.length){var a=t.getFiles().find(function(e){return"folder"==e.type&&e.name==r[0]});return a?("blog"==a.name?n.open("http://wp.curve.in.th","_blank"):"twitter"==a.name&&n.open("https://twitter.com/ChameleonTK","_blank"),{successful:!0,messages:[]}):{successful:!1,messages:["cd: "+r[0]+": No such file or directory"]}}return r.length>1?{successful:!1,messages:["cd: Not support multiple files"]}:{successful:!1,messages:["cd: Invalid arguments"]}}function s(t,n){return e(function(e,s){switch(t){case"ls":return e(r(t,n)),!0;case"cat":return e(a(t,n)),!0;case"man":case"help":return e(i(t,n)),!0;case"hi":return e({successful:!0,messages:["Hi, How are you?"]}),!0;case"say":case"echo":return e({successful:!0,messages:n}),!0;case"cd":return e(o(t,n)),!0;default:return e({successful:!1,messages:["-bash: "+t+": command not found"]}),!1}})}return{execute:s}}]),angular.module("ngterminal").factory("Files",["$q",function(e){function t(e){var t=r.find(function(t){return"file"==t.type&&t.name==e});return!!t&&("README.md"==t.name?["Hi, I'm Pakawat Nakwijit."," ","I graduated in Computer Engineering, Kasetsart University. ","I develop an interest in Programming Languages, NLP and AI.","However, you also can talk to me about movies, adventure trips, and cats."," ","Now, I am working as a web developer at Maxile co.,ltd and ","writing a blog about whatever I am interested especially about cats."," ","If you would like to get in touch with me, whether it be for technical issue, or to just say hi, ","don't heritage to send me an email or a tweet."," ","my email : pakawat.nk@gmail.com","my twitter : @chameleontk"," ","And learn more about me at http://wp.curve.in.th"]:"contact.txt"==t.name?["email : pakawat.nk@gmail.com","twitter : @chameleontk"," ","And learn more about me at http://wp.curve.in.th"]:"experiences.txt"==t.name?["2016 - present","Software Developer at Maxile co.,ltd.","  - CMS for website http://www.1for100.or.th"," ","  - Ionic application: e-Tracking","    Application for tracking import/export document's status"," ","  - Neekrung Magazine http://www.neekrung.com","    implemented a responsive website for Neekrung magazines."," ","  - eBMN project http://ebmn.cdd.go.th","    An online census form which need to handle more than million of data records."," ","Freelance","  - Curator at TEDxKasetsartU","    curated speakers to build an interesting talk at TEDx conference"," ","  - Attended DevFest Hackathon 2016 ","    as '25 Finalists' with Khunkrukanoomping – An intelligent teacher(chatbot) on LINE platform"," ","  - Developed FrontEnd http://www.petpolar.com","    A social network focusing on pet lover. I work on frontend development including web site animation, ","    user interface and social feature."," ","  - Waste challenge Game on website http://www.wastechallenge.com","    participate with WWF&Hilton for awareness campaign on waste segregation. ","    It's a game that user have to choose the right type of 20 waste in 1 minute."," ","2015","  - Published a research paper in ICSEC 2015, Chiangmai, Thailand","    'A Parser Generator Using the Grammar Flow Graph'. An easier parser generator works for context-free language with acceptable performance."," ","  - Antikopae Project with Dr.Paruj Ratanaworabhan","    worked on Clone detection system for investigating research documents."," ","2014","  - Internship student at NIST, Nara, Japan","    researched about code refactoring in Software Design and Analysis Laboratory"," ","  - Asuku Project","    An artificial intelligence conversation application use learning model from data in http://www.ask.fm"," ","2011 - 2013","  - Teaching Assistant for Computer and Programming, Compiler,","    Computer Architecture and Microprocessor"," ","  - Kasetsart University Medal of Honor Recipient: 2011, 2012, 2013"," ","  - Treasurer of Computer Engineering’s Student Body Organization"," ","  - Organizer and Master of Ceremony in many activies such as Toktakcamp, Konnec#6, eXceed Camp","    training camp for sophomore&junior student at Kasetsart University"," ","  - Attended 11th Young Webmaster Camp","    recieced honor for the best creative website (Punmap.com)"," ","  - Speaker in Barcamp Bangkok and Barcamp Bangkhen","    'Scratch ง่ายๆ ใน 1 นาที' in Barcamp Bangkhen 4, 2013; ","    'Phalcon # The fastest PHP Framework' in Barcamp Bangkok 2014 ","    'Robot 1st Times' in Barcamp Bangkhen 5, 2014;","    'มาเป็นทาสแมวกันเถอะ' in Barcamp Bangkhen 6,2015;"," ","  - Exhibited at Google I/O 2013, Thailand"," "]:"man"==t.name?["Common commands:","    ls  [-al] [folder]   list directory contents","    cd  [folder]         change directory","    cat [file]           concatenate and print files","    man                  format and display the on-line manual pages"," ","For help on any individual command run tweet to me at @chameleontk"]:[])}function n(){return r}var r=[{name:"blog",type:"folder",size:"29k"},{name:"contact.txt",type:"file",size:"32"},{name:"experiences.txt",type:"file",size:"1k"},{name:"man",type:"file",size:"292"},{name:"twitter",type:"folder",size:"430"},{name:"README.md",type:"file",size:"3723"}];return{getFiles:n,read:t}}]),angular.module("ngterminal").factory("Writer",["$q","$location","$anchorScroll","$interval","$sce",function(e,t,n,r,a){return function(i){function o(){return g.options.terminal_name+":~$ "}function s(){w.plainText.push(""),w.lines.push(""),g.currentIndex++,c(g.currentIndex)}function c(e){var r="command-"+e;t.hash()!==r?t.hash(r):n()}function l(t){return t.reduce(function(e,t){return e.then(function(){return m(t)})},e.resolve()).then(function(){return m(o(),!0)})}function u(){return g.typerAviable}function m(t,n){return g.typerAviable=!1,e(function(e,a){var i=0;r(function(){i>=t.length?(n||s(),g.typerAviable=!0,e()):d(t[i]),i++},g.options.write_delay,t.length+1)})}function d(e){w.plainText[g.currentIndex]+=h(e),w.lines[g.currentIndex]=a.trustAsHtml(w.plainText[g.currentIndex])}function f(e){var t=w.plainText[g.currentIndex];if(!e&&t.length<=g.options.terminal_name.length+9)return!1;if(";"==t[t.length-1]){for(;"&"!=t[t.length-1];)t=t.slice(0,-1),w.plainText[g.currentIndex]=t,w.lines[g.currentIndex]=a.trustAsHtml(t);w.plainText[g.currentIndex]=t.slice(0,-1),w.lines[g.currentIndex]=a.trustAsHtml(w.plainText[g.currentIndex])}else w.plainText[g.currentIndex]=t.slice(0,-1),w.lines[g.currentIndex]=a.trustAsHtml(w.plainText[g.currentIndex])}function p(e){w.plainText[g.currentIndex]=e,w.lines[g.currentIndex]=a.trustAsHtml(w.plainText[g.currentIndex])}function h(e){switch(e){case" ":return"&nbsp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case";":return"&#59;";default:return e}}var g=this;g.options=i,g.terminalName=o,g.newLine=s,g.terminalAutoWriteTexts=l,g.terminalAutoWrite=m,g.terminalWriteChar=d,g.terminalDelChar=f,g.terminalReplace=p,g.aviable=u,g.currentIndex=0,g.typerAviable=!1;var w=i.scope}}]),angular.module("ngterminal").directive("terminal",["$sce","$q","$interval","$document","$timeout","$location","$anchorScroll","Command","Writer",function(e,t,n,r,a,i,o,s,c){var l=this;return{scope:{},templateUrl:"templates/terminal.html",link:function(e){function t(e){switch(e.keyCode){case 8:return l.writer.aviable()&&a(function(){l.writer.terminalDelChar(),l.command=l.command.slice(0,-1)}),e.preventDefault(),!0;case 9:return l.writer.aviable()&&a(function(){}),e.preventDefault(),!0;case 13:return l.writer.aviable()&&a(function(){if(l.writer.newLine(),l.command){var e=l.command.split(" ").filter(function(e){return e}),t=e.shift();l.commandHistory[l.commandHistory.length-1]=l.command,l.commandHistory.push(""),l.commandHistoryPointer=l.commandHistory.length-1,s.execute(t,e).then(function(e){l.writer.terminalAutoWriteTexts(e.messages)}),l.command=""}else l.writer.terminalAutoWrite(l.writer.terminalName(),!0)}),e.preventDefault(),!0;case 38:return l.writer.aviable()&&l.commandHistoryPointer>0&&a(function(){l.commandHistoryPointer--,l.command=l.commandHistory[l.commandHistoryPointer],l.writer.terminalReplace(l.writer.terminalName()+l.commandHistory[l.commandHistoryPointer])}),e.preventDefault(),!0;case 40:return l.writer.aviable()&&l.commandHistoryPointer<l.commandHistory.length-1&&a(function(){l.commandHistoryPointer++,l.command=l.commandHistory[l.commandHistoryPointer],l.writer.terminalReplace(l.writer.terminalName()+l.commandHistory[l.commandHistoryPointer])}),e.preventDefault(),!0;default:return!0}}function n(e){l.writer.aviable()&&(a(function(){l.writer.terminalWriteChar(e.key),l.command+=e.key}),e.preventDefault())}l.options={write_delay:10,init_text:[],terminal_name:"imtk@curveinth",scope:e},l.writer=null,e.plainText=[""],e.lines=[""],l.command="",l.commandHistory=[""],l.commandHistoryPointer=0,function(){var e=new Date,n=l.options.init_text.slice(0);n.push("Last login : "+e.toUTCString()+" on ttys001"),n.push(""),n.push("*** TYPE `man` to see all aviable commands ***"),l.writer=new c(l.options),l.writer.terminalAutoWriteTexts(n).then(function(){return l.writer.terminalAutoWrite("cat README.md",!0)}).then(function(){l.command="cat README.md",t({keyCode:13,preventDefault:function(){}})})}(),r.bind("keydown",t),r.bind("keypress",n)}}}]);